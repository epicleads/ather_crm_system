{% extends 'base.html' %}
{% block title %}Receptionist Dashboard - Ather CRM{% endblock %}
{% block content %}

<style>
  .hero-header {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 50%, #bd2130 100%);
    color: white;
    padding: 1.5rem 0;
    margin-bottom: 2rem;
    border-radius: 0 0 20px 20px;
    box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
    position: relative;
    overflow: hidden;
  }
  
  .hero-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
    animation: shimmer 3s infinite;
  }
  
  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  
  .kpi-card {
    background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
    border: none;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .kpi-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  }
  
  .kpi-card.won {
    border-left: 5px solid #28a745;
  }
  
  .kpi-card.lost {
    border-left: 5px solid #dc3545;
  }
  
  .kpi-card.pending {
    border-left: 5px solid #ffc107;
  }
  
  .kpi-card.assigned {
    border-left: 5px solid #007bff;
  }
  
  .kpi-card.total {
    border-left: 5px solid #17a2b8;
  }
  
  .kpi-card.today {
    border-left: 5px solid #6f42c1;
  }
  
  .kpi-card.conversion {
    border-left: 5px solid #fd7e14;
  }
  
  .bg-gradient-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .table th {
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
  }
  
  .table td {
    vertical-align: middle;
  }
  
  .form-select.border-2, .form-control.border-2 {
    border-width: 2px !important;
    transition: all 0.3s ease;
  }
  
  .form-select.border-2:focus, .form-control.border-2:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
  }
  
  .card.shadow-sm {
    transition: all 0.3s ease;
  }
  
  .card.shadow-sm:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
  }
  
  .badge {
    font-size: 0.75rem;
    padding: 0.5em 0.75em;
  }
  
  .btn-outline-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  
  .kpi-number {
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
  }
  
  .kpi-label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.8;
  }
  
  .action-card {
    background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
    border: none;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
  }
  
  .action-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  }
  
  .btn-action {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
    border: none;
    border-radius: 25px;
    padding: 1rem 2rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
  }
  
  .btn-action:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.6);
    background: linear-gradient(135deg, #c82333 0%, #bd2130 100%);
  }
</style>

<div class="hero-header">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 text-center">
        <h2 class="h3 fw-bold mb-2">
          Receptionist Dashboard
        </h2>
        <p class="lead mb-0">Welcome, {{ session.rec_name }} - {{ session.rec_branch }} Branch</p>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <!-- KPI Cards Row -->
  <div class="row mb-4">
    <div class="col-md-4 mb-3">
      <div class="card kpi-card total text-center">
        <div class="card-body">
          <div class="kpi-number text-info">{{ total_walkin_count }}</div>
          <div class="kpi-label">Total Walk-in Leads</div>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card kpi-card won text-center">
        <div class="card-body">
          <div class="kpi-number text-success">{{ won_leads_count }}</div>
          <div class="kpi-label">Won Leads</div>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card kpi-card lost text-center">
        <div class="card-body">
          <div class="kpi-number text-danger">{{ lost_leads_count }}</div>
          <div class="kpi-label">Lost Leads</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Second Row of KPI Cards -->
  <div class="row mb-4">
    <div class="col-md-3 mb-3">
      <div class="card kpi-card pending text-center">
        <div class="card-body">
          <div class="kpi-number text-warning">{{ pending_leads_count }}</div>
          <div class="kpi-label">Pending Leads</div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card kpi-card response-rate text-center">
        <div class="card-body">
          <div class="kpi-number text-info">{{ first_call_response_rate }}%</div>
          <div class="kpi-label">First Call Response Rate</div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card kpi-card today text-center">
        <div class="card-body">
          <div class="kpi-number text-purple">{{ today_leads_count }}</div>
          <div class="kpi-label">Today's Leads</div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card kpi-card conversion text-center">
        <div class="card-body">
          <div class="kpi-number text-orange">{{ conversion_rate }}%</div>
          <div class="kpi-label">Conversion Rate</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Action Card Row -->
  <div class="row">
    <div class="col-md-12 mb-4">
      <div class="card action-card">
        <div class="card-body text-center">
          <h5 class="card-title mb-3">Add New Walk-in Lead</h5>
          <p class="card-text mb-4">Register a new customer who walked into the showroom</p>
          <a href="{{ url_for('add_walkin_lead') }}" class="btn btn-action text-white">
            <i class="fas fa-plus me-2"></i>Add Walk-in Lead
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Quick Stats -->
  <div class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-light">
          <h5 class="mb-0">Quick Statistics</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-3 text-center">
              <div class="border-end">
                <h6 class="text-muted">Total Leads</h6>
                <h4 class="text-primary">{{ total_walkin_count }}</h4>
              </div>
            </div>
            <div class="col-md-3 text-center">
              <div class="border-end">
                <h6 class="text-muted">Success Rate</h6>
                <h4 class="text-success">{{ conversion_rate }}%</h4>
              </div>
            </div>
            <div class="col-md-3 text-center">
              <div class="border-end">
                <h6 class="text-muted">Pending</h6>
                <h4 class="text-warning">{{ pending_leads_count }}</h4>
              </div>
            </div>
            <div class="col-md-3 text-center">
              <div>
                <h6 class="text-muted">Today</h6>
                <h4 class="text-info">{{ today_leads_count }}</h4>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


</div>



<script>
  // Add some interactive effects
  document.addEventListener('DOMContentLoaded', function() {
    // Animate KPI cards on load
    const kpiCards = document.querySelectorAll('.kpi-card');
    kpiCards.forEach((card, index) => {
      setTimeout(() => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'all 0.5s ease';
        
        setTimeout(() => {
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, 100);
      }, index * 100);
    });
  });
</script>

{% endblock %} 